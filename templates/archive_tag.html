{% extends "smallhead.html" %}{% load static %}{% load humanize %}

{% block title %}Simon Willison on {{ tags|join:" and " }}{% endblock %}

{% block extrahead %}
<meta property="og:type" content="website" />
<meta property="og:title" content="Simon Willison on {{ tags|join:" and " }}" />
<meta property="og:description" content="{{ total|intcomma }} posts tagged ‘{{ tags|join:"’ and ‘" }}’. {{ tag.description_rendered|striptags|truncatechars:160|force_escape }}" />
<meta property="og:site_name" content="Simon Willison’s Weblog" />
{% endblock %}

{% block primary %}
{% if tags|length == 1 %}
    <a style="float: right; border-bottom: none; margin-top: 0.4em" href="/tags/{{ tags.0 }}.atom"><img src="{% static 'css/img/feed-icon.svg' %}" alt="Atom feed for {{ tags.0 }}" width="20" height="20"></a>
{% endif %}
<h2 class="archive-h2">{{ total|intcomma }} post{{ total|pluralize }} tagged “{{ tags|join:"” and “" }}”</h2>
<!-- Tag ID: {{ tag.pk }} -->
{% if tag.description %}
    <div class="tag-description">{{ tag.description_rendered }}</div>
{% endif %}

{% if total > 10 %}
    <form action="/search/" method="GET" class="search-form">
        <div class="search-form-wrapper">
            <input type="search" class="search-input" name="q" value="" placeholder="Search everything tagged '{{ tags|join:"' and '" }}'" autocomplete="off">
            <input type="submit" class="search-submit" value="Search">
        </div>
        {% for tag in tags %}
            <input type="hidden" name="tag" value="{{ tag }}">
        {% endfor %}
    </form>
{% endif %}

{% load blog_tags %}

{% blog_mixed_list_with_dates items year_headers=1 %}

{% include "_pagination.html" %}

{% endblock %}

{% block secondary %}
<div class="metabox">
{% if only_one_tag and tag.get_related_tags %}
    <p><strong>Related</strong></p>
    {% for related_tag in tag.get_related_tags %}
        <a class="item-tag" href="{{ related_tag.get_absolute_url }}" rel="tag">
            {{ related_tag }}
            <span>{{ related_tag.total_count }}</span>
        </a>
    {% endfor %}
    </p>
{% endif %}
</div>
{% endblock %}
